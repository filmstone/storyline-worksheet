<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI í™œìš© ìŠ¤í† ë¦¬ë¼ì¸ ì›Œí¬ì‹œíŠ¸</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app"></div>

    <script>
        let state = {
            responses: {},
            expandedSections: {
                step0: true,
                step1: true,
                step2: true,
                step3: true,
                step4: true,
                step5: true,
                step6: true,
                aiAnalysis: true
            },
            copiedPrompt: null,
            saved: false,
            aiAnalysisResult: null,
            isAnalyzing: false
        };

        function loadFromStorage() {
            const saved = sessionStorage.getItem('worksheet_responses');
            if (saved) {
                state.responses = JSON.parse(saved);
            }
            const savedAnalysis = sessionStorage.getItem('worksheet_analysis');
            if (savedAnalysis) {
                state.aiAnalysisResult = JSON.parse(savedAnalysis);
            }
        }

        function saveToStorage() {
            sessionStorage.setItem('worksheet_responses', JSON.stringify(state.responses));
            if (state.aiAnalysisResult) {
                sessionStorage.setItem('worksheet_analysis', JSON.stringify(state.aiAnalysisResult));
            }
        }

        function handleInputChange(field, value) {
            state.responses[field] = value;
            saveToStorage();
        }

        function toggleSection(section) {
            state.expandedSections[section] = !state.expandedSections[section];
            render();
        }

        function copyPromptByField(field) {
            const promptElement = document.querySelector(`pre[data-prompt="${field}"]`);
            if (!promptElement) return;
            
            const promptText = promptElement.textContent;
            const userContent = state.responses[field] || '[ì—¬ê¸°ì— ì‘ì„±í•œ ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”]';
            const fullPrompt = promptText + '\n\n[ë‚´ê°€ ì‘ì„±í•œ ë‚´ìš©]\n' + userContent;
            
            navigator.clipboard.writeText(fullPrompt).then(() => {
                state.copiedPrompt = field;
                render();
                setTimeout(() => {
                    state.copiedPrompt = null;
                    render();
                }, 2000);
            }).catch(() => {
                alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            });
        }

        function getProgress() {
            const totalFields = 13;
            const filledFields = Object.values(state.responses).filter(v => v && v.trim()).length;
            const percentage = Math.round((filledFields / totalFields) * 100);
            return Math.min(percentage, 100);
        }

        function showSaved() {
            state.saved = true;
            render();
            setTimeout(() => {
                state.saved = false;
                render();
            }, 2000);
        }

        function downloadWorksheet() {
            const content = '\uFEFF' + `AI í™œìš© ìŠ¤í† ë¦¬ë¼ì¸ ì›Œí¬ì‹œíŠ¸ - ì‘ì„± ë‚´ìš©
==========================================

[STEP 1] ë‚˜ëŠ” ì–´ë–»ê²Œ ì‚´ì•„ì™”ëŠ”ê°€
------------------------------
ê´€ì‹¬ì˜ ì‹œì‘ ê³„ê¸°: ${state.responses.step1_interest || ''}
í˜ë“¤ì—ˆì§€ë§Œ ê³„ì†í–ˆë˜ ì´ìœ : ${state.responses.step1_reason || ''}
ë‚˜ì˜ ì„±í–¥/íƒœë„ í‚¤ì›Œë“œ: ${state.responses.step1_attitude || ''}

[STEP 2] ì–´ë–¤ ì„ íƒì„ í•´ì™”ëŠ”ê°€
------------------------------
ê³ ë¯¼í–ˆë˜ ì„ íƒì§€: ${state.responses.step2_options || ''}
ì„ íƒ ê¸°ì¤€: ${state.responses.step2_criteria || ''}
ì§€ê¸ˆ ë°©í–¥ì„ íƒí•œ ì´ìœ : ${state.responses.step2_reason || ''}

[STEP 3] ë¬´ì—‡ì„ í•´ì™”ëŠ”ê°€
------------------------------
í”„ë¡œì íŠ¸ëª…: ${state.responses.step3_project || ''}
ë‚˜ì˜ ì—­í• : ${state.responses.step3_role || ''}
ë¬¸ì œ ìƒí™©: ${state.responses.step3_problem || ''}
í•´ê²° ê³¼ì •: ${state.responses.step3_solution || ''}
ê²°ê³¼/ë°°ìš´ ì : ${state.responses.step3_result || ''}

[STEP 4] ë¶€ì¡±í•œ ì ê³¼ ì„±ì¥ ë…¸ë ¥
------------------------------
ë¶€ì¡±í•˜ë‹¤ê³  ëŠë‚€ ì : ${state.responses.step4_weakness || ''}
ê³„ê¸°: ${state.responses.step4_trigger || ''}
í˜„ì¬ì˜ ë…¸ë ¥: ${state.responses.step4_effort || ''}

[STEP 5] ì•ìœ¼ë¡œì˜ ë°©í–¥
------------------------------
ê´€ì‹¬ ê¸°ì—…/ë¶„ì•¼: ${state.responses.step5_company || ''}
ì¸ìƒ ê¹Šì€ ì´ìœ : ${state.responses.step5_impression || ''}
ì—°ê²° ê°€ëŠ¥í•œ ë‚˜ì˜ ê²½í—˜: ${state.responses.step5_connection || ''}
`;

            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ìŠ¤í† ë¦¬ë¼ì¸_ì›Œí¬ì‹œíŠ¸_ì‘ì„±ë‚´ìš©.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function render() {
            const progress = getProgress();
            
            document.getElementById('app').innerHTML = `
                <div class="bg-blue-600 text-white p-6 sticky top-0 z-10 shadow-md">
                    <div class="max-w-4xl mx-auto">
                        <h1 class="text-3xl font-bold mb-2">AI í™œìš© ìŠ¤í† ë¦¬ë¼ì¸ ì›Œí¬ì‹œíŠ¸</h1>
                        <p class="text-blue-100">ìê¸°ì†Œê°œì„œì™€ ë©´ì ‘ì„ ìœ„í•œ ë‚˜ë§Œì˜ ìŠ¤í† ë¦¬ ì •ë¦¬</p>
                        <div class="mt-4 flex items-center gap-4">
                            <div class="flex-1 bg-blue-700 rounded-full h-3">
                                <div class="bg-yellow-400 h-3 rounded-full transition-all duration-500" style="width: ${progress}%"></div>
                            </div>
                            <span class="text-sm font-semibold">${progress}%</span>
                        </div>
                    </div>
                </div>

                <div class="max-w-4xl mx-auto p-6 space-y-6 pb-32">
                    <div class="bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded-r-lg">
                        <p class="text-gray-800 font-semibold mb-2">âš ï¸ ì¤‘ìš”: AIëŠ” ìƒê°ì„ ëŒ€ì‹ í•´ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤</p>
                        <p class="text-gray-700">ë¨¼ì € <strong>ë‚´ ê²½í—˜ì„ ì ê³ </strong>, ê·¸ ë‹¤ìŒì— <strong>AIë¡œ ì •ë¦¬Â·ë³´ì™„</strong>í•©ë‹ˆë‹¤.</p>
                    </div>

                    ${renderSection('step0', 'STEP 0. ì›Œí¬ì‹œíŠ¸ ì‚¬ìš© ë°©ë²•', '', `
                        <div class="space-y-3 text-gray-700">
                            <div class="flex items-start gap-3">
                                <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 font-semibold text-sm">1</span>
                                <p>ê° ì§ˆë¬¸ì— ëŒ€í•´ <strong>í•µì‹¬ í‚¤ì›Œë“œ ìœ„ì£¼ë¡œ ì§ì ‘ ì‘ì„±</strong>í•˜ì„¸ìš”.</p>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 font-semibold text-sm">2</span>
                                <p>ë¬¸ì¥ì´ ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ìŠµë‹ˆë‹¤.</p>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 font-semibold text-sm">3</span>
                                <p>ì‘ì„± í›„ ì œì‹œëœ <strong>AI í”„ë¡¬í”„íŠ¸</strong>ë¥¼ í™œìš©í•´ ì •ë¦¬Â·í™•ì¥í•©ë‹ˆë‹¤.</p>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="bg-blue-100 text-blue-600 w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 font-semibold text-sm">4</span>
                                <p>AI ê²°ê³¼ë¬¼ì„ ê·¸ëŒ€ë¡œ ì“°ì§€ ë§ê³ , <strong>ë‚´ ê²½í—˜ê³¼ ë§ëŠ”ì§€ ë°˜ë“œì‹œ ê²€ì¦</strong>í•˜ì„¸ìš”.</p>
                            </div>
                        </div>
                    `)}

                    ${renderStep1()}
                    ${renderStep2()}
                    ${renderStep3()}
                    ${renderStep4()}
                    ${renderStep5()}
                    ${renderStep6()}

                    <div class="bg-gradient-to-br from-blue-600 to-blue-800 text-white p-8 rounded-lg">
                        <h3 class="text-2xl font-bold mb-4">ë§ˆë¬´ë¦¬ ë©”ì‹œì§€</h3>
                        <p class="text-lg mb-4">ìê¸°ì†Œê°œì„œëŠ” AIê°€ ë„ì™€ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                        <p class="text-lg mb-4">í•˜ì§€ë§Œ <strong>ë©´ì ‘ì—ì„œ ë‚˜ë¥¼ ëŒ€ì‹  ë§í•´ì¤„ ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤.</strong></p>
                        <p class="text-lg">ì´ ì›Œí¬ì‹œíŠ¸ëŠ” 'ê¸€ì„ ì˜ ì“°ê¸° ìœ„í•œ ìë£Œ'ê°€ ì•„ë‹ˆë¼,<br>
                        <strong>ë©´ì ‘ì—ì„œ í”ë“¤ë¦¬ì§€ ì•Šê¸° ìœ„í•œ ì¤€ë¹„ ê³¼ì •</strong>ì…ë‹ˆë‹¤.</p>
                    </div>

                    ${renderAIAnalysisSection()}
                </div>

                <div class="fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 p-4 shadow-lg">
                    <div class="max-w-4xl mx-auto flex gap-4">
                        <button onclick="showSaved()" class="flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition-colors font-semibold">
                            ${state.saved ? 
                                '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg> ì €ì¥ë¨!' :
                                '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg> ì§„í–‰ìƒí™© ì €ì¥'
                            }
                        </button>
                        <button onclick="downloadWorksheet()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition-colors font-semibold">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                            ì‘ì„±ë‚´ìš© ë‹¤ìš´ë¡œë“œ
                        </button>
                    </div>
                </div>
            `;

            attachEventListeners();
        }

        function renderSection(id, title, subtitle, content) {
            const expanded = state.expandedSections[id];
            return `
                <div class="bg-white rounded-lg shadow-md overflow-hidden">
                    <button onclick="toggleSection('${id}')" class="w-full p-6 flex items-center justify-between hover:bg-gray-50 transition-colors text-left">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">${title}</h2>
                            ${subtitle ? `<p class="text-blue-600 mt-1">${subtitle}</p>` : ''}
                        </div>
                        ${expanded ? 
                            '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="18 15 12 9 6 15"></polyline></svg>' :
                            '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>'
                        }
                    </button>
                    ${expanded ? `<div class="p-6 pt-0 border-t">${content}</div>` : ''}
                </div>
            `;
        }

        function renderTextArea(label, field, placeholder) {
            const value = (state.responses[field] || '').replace(/"/g, '&quot;');
            return `
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">${label}</label>
                    <textarea 
                        data-field="${field}"
                        placeholder="${placeholder}"
                        class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all resize-y"
                        style="min-height: 96px;"
                        rows="4"
                    >${state.responses[field] || ''}</textarea>
                </div>
            `;
        }

        function renderPromptBox(promptText, field) {
            const copied = state.copiedPrompt === field;
            return `
                <div class="bg-gray-50 border-2 border-gray-300 rounded-lg p-4">
                    <div class="flex items-start justify-between mb-3">
                        <p class="font-semibold text-gray-700">ğŸ¤– AI í™œìš© í”„ë¡¬í”„íŠ¸</p>
                        <button 
                            onclick="copyPromptByField('${field}')"
                            class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors font-semibold ${
                                copied 
                                    ? 'bg-green-600 text-white' 
                                    : 'bg-blue-600 hover:bg-blue-700 text-white'
                            }"
                        >
                            ${copied ?
                                '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg> ë³µì‚¬ë¨!' :
                                '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> ë³µì‚¬í•˜ê¸°'
                            }
                        </button>
                    </div>
                    <pre class="text-sm text-gray-700 whitespace-pre-wrap font-mono bg-white p-3 rounded border border-gray-200" data-prompt="${field}">${promptText}</pre>
                </div>
            `;
        }

        function renderStep1() {
            return renderSection('step1', 'STEP 1. ë‚˜ëŠ” ì–´ë–»ê²Œ ì‚´ì•„ì™”ëŠ”ê°€', 'íƒœë„Â·ë™ê¸° ì˜ì—­', `
                <div class="space-y-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <p class="font-semibold text-gray-800 mb-2">âœ ìŠ¤ìŠ¤ë¡œì—ê²Œ ë¬»ëŠ” ì§ˆë¬¸</p>
                        <ul class="space-y-2 text-gray-700">
                            <li>â€¢ ê²Œì„/ì½˜í…ì¸  ë¶„ì•¼ì— ê´€ì‹¬ì„ ê°–ê²Œ ëœ ê³„ê¸°ëŠ” ë¬´ì—‡ì´ì—ˆë‚˜ìš”?</li>
                            <li>â€¢ ê·¸ ê³¼ì •ì—ì„œ í¬ê¸°í•˜ì§€ ì•Šê³  ê³„ì† í•´ì˜¤ê²Œ ë§Œë“  ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</li>
                            <li>â€¢ ëª©í‘œë¥¼ ì„¸ì› ì„ ë•Œ, ë³´í†µ ì–´ë–¤ íƒœë„ë¡œ ì ‘ê·¼í•´ì™”ë‚˜ìš”?</li>
                        </ul>
                    </div>
                    ${renderTextArea('ê´€ì‹¬ì˜ ì‹œì‘ ê³„ê¸°', 'step1_interest', 'ì˜ˆ: ëŒ€í•™êµ ë•Œ ë™ì•„ë¦¬ì—ì„œ ì²˜ìŒ ê²Œì„ ê°œë°œì„ í•´ë³´ê³ ...')}
                    ${renderTextArea('í˜ë“¤ì—ˆì§€ë§Œ ê³„ì†í–ˆë˜ ì´ìœ ', 'step1_reason', 'ì˜ˆ: ì™„ì„±ëœ ê²Œì„ì„ ë³´ëŠ” ìˆœê°„ì˜ ì„±ì·¨ê°...')}
                    ${renderTextArea('ë‚˜ì˜ ì„±í–¥ / íƒœë„ í‚¤ì›Œë“œ', 'step1_attitude', 'ì˜ˆ: ê¼¼ê¼¼í•¨, ëˆê¸°, í˜¸ê¸°ì‹¬...')}
                </div>
            `);
        }

        function renderStep2() {
            return renderSection('step2', 'STEP 2. ì–´ë–¤ ì„ íƒì„ í•´ì™”ëŠ”ê°€', 'ë°©í–¥ì„±Â·íŒë‹¨ ì˜ì—­', `
                <div class="space-y-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <p class="font-semibold text-gray-800 mb-2">âœ ìŠ¤ìŠ¤ë¡œì—ê²Œ ë¬»ëŠ” ì§ˆë¬¸</p>
                        <ul class="space-y-2 text-gray-700">
                            <li>â€¢ ê²Œì„ ë¶„ì•¼ ì¤‘ì—ì„œë„ ë‚´ê°€ ì„ íƒí•œ ì§ë¬´ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</li>
                            <li>â€¢ ë‹¤ë¥¸ ì„ íƒì§€(ì „ê³µ, ì§ë¬´, ì§„ë¡œ)ë¥¼ ê³ ë¯¼í–ˆë˜ ì ì´ ìˆë‚˜ìš”?</li>
                            <li>â€¢ ìµœì¢…ì ìœ¼ë¡œ ì§€ê¸ˆì˜ ë°©í–¥ì„ ì„ íƒí•œ ê¸°ì¤€ì€ ë¬´ì—‡ì´ì—ˆë‚˜ìš”?</li>
                        </ul>
                    </div>
                    ${renderTextArea('ê³ ë¯¼í–ˆë˜ ì„ íƒì§€', 'step2_options', 'ì˜ˆ: ê²Œì„ ê°œë°œ vs ê¸°íš...')}
                    ${renderTextArea('ì„ íƒ ê¸°ì¤€', 'step2_criteria', 'ì˜ˆ: ë‚´ê°€ ê°€ì¥ ëª°ì…í•  ìˆ˜ ìˆëŠ” ì‘ì—…...')}
                    ${renderTextArea('ì§€ê¸ˆ ë°©í–¥ì„ íƒí•œ ì´ìœ ', 'step2_reason', 'ì˜ˆ: ê²Œì„ ê°œë°œ ê³¼ì •ì—ì„œ ìºë¦­í„°ì˜ ì›€ì§ì„ì„ êµ¬í˜„í•˜ëŠ” ê²Œ ê°€ì¥ ì¬ë¯¸ìˆì—ˆê³ ...')}
                </div>
            `);
        }

        function renderStep3() {
            return renderSection('step3', 'STEP 3. ë¬´ì—‡ì„ í•´ì™”ëŠ”ê°€', 'ê²½í—˜Â·ì „ë¬¸ì„± ì˜ì—­', `
                <div class="space-y-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <p class="font-semibold text-gray-800 mb-2">âœ ìŠ¤ìŠ¤ë¡œì—ê²Œ ë¬»ëŠ” ì§ˆë¬¸</p>
                        <ul class="space-y-2 text-gray-700">
                            <li>â€¢ ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” í”„ë¡œì íŠ¸/ì‘ì—…ì€ ë¬´ì—‡ì¸ê°€ìš”?</li>
                            <li>â€¢ ê·¸ ì‘ì—…ì—ì„œ ë‚´ê°€ ë§¡ì€ ì—­í• ì€ ë¬´ì—‡ì´ì—ˆë‚˜ìš”?</li>
                            <li>â€¢ ì‘ì—… ì¤‘ ê²ªì—ˆë˜ ë¬¸ì œì™€ í•´ê²° ê³¼ì •ì€ ë¬´ì—‡ì´ì—ˆë‚˜ìš”?</li>
                            <li>â€¢ ê·¸ ê²½í—˜ ì´í›„ ë‹¬ë¼ì§„ ì ì€ ë¬´ì—‡ì¸ê°€ìš”?</li>
                        </ul>
                    </div>
                    ${renderTextArea('í”„ë¡œì íŠ¸ëª…', 'step3_project', 'ì˜ˆ: í•™ê³¼ ì¡¸ì—… ì‘í’ˆ - ê²Œì„ í”„ë¡œì íŠ¸ ê°œë°œ')}
                    ${renderTextArea('ë‚˜ì˜ ì—­í• ', 'step3_role', 'ì˜ˆ: ê²Œì„í”Œë ˆì´ ì‹œìŠ¤í…œ ê°œë°œ ì „ë‹´, UI/UX ê°œë°œ, ì—”ì§„ íë¦„ ì œì–´...')}
                    ${renderTextArea('ë¬¸ì œ ìƒí™©', 'step3_problem', 'ì˜ˆ: êµ¬ì¡°ì˜ ìœ ì§€ ë³´ìˆ˜ì„±ì— ëŒ€í•œ ì•„ì‰¬ì›€...')}
                    ${renderTextArea('í•´ê²° ê³¼ì •', 'step3_solution', 'ì˜ˆ: AIë¥¼ Behavior Tree + Custom Taskë¡œ ë¶„ë¦¬í•˜ì—¬ í™•ì¥ì„± ìˆëŠ” êµ¬ì¡°ë¡œ ê°œì„ ...')}
                    ${renderTextArea('ê²°ê³¼ / ë°°ìš´ ì ', 'step3_result', 'ì˜ˆ: ë‹¨ìˆœ êµ¬í˜„ì„ ë„˜ì–´ ì„¤ê³„, í™•ì¥, ìœ ì§€ ë³´ìˆ˜ë¥¼ ê³ ë ¤í•˜ëŠ” ì‚¬ê³ ë°©ì‹ì˜ ì¤‘ìš”ì„±ì„ ë°°ì›€...')}
                </div>
            `);
        }

        function renderStep4() {
            return renderSection('step4', 'STEP 4. ë¶€ì¡±í•œ ì ê³¼ ì„±ì¥ ë…¸ë ¥', 'ìê¸°ì¸ì‹ ì˜ì—­', `
                <div class="space-y-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <p class="font-semibold text-gray-800 mb-2">âœ ìŠ¤ìŠ¤ë¡œì—ê²Œ ë¬»ëŠ” ì§ˆë¬¸</p>
                        <ul class="space-y-2 text-gray-700">
                            <li>â€¢ ìŠ¤ìŠ¤ë¡œ ë¶€ì¡±í•˜ë‹¤ê³  ëŠë¼ëŠ” ë¶€ë¶„ì€ ë¬´ì—‡ì¸ê°€ìš”?</li>
                            <li>â€¢ ê·¸ ì•½ì ì„ ì¸ì§€í•˜ê²Œ ëœ ê³„ê¸°ëŠ” ë¬´ì—‡ì´ì—ˆë‚˜ìš”?</li>
                            <li>â€¢ í˜„ì¬ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ë³´ì™„í•˜ê³  ìˆë‚˜ìš”?</li>
                        </ul>
                    </div>
                    ${renderTextArea('ë¶€ì¡±í•˜ë‹¤ê³  ëŠë‚€ ì ', 'step4_weakness', 'ì˜ˆ: ê°œì¸ ì‘ì—…ì— ì§‘ì¤‘í•˜ë‹¤ ë³´ë‹ˆ í˜‘ì—… ê³¼ì •ì—ì„œ ì†Œí†µì´ ë¶€ì¡±...')}
                    ${renderTextArea('ê³„ê¸°', 'step4_trigger', 'ì˜ˆ: êµ¬í˜„ ê¸°ëŠ¥ì˜ ì˜ë„ê°€ ì˜ ì „ë‹¬ë˜ì§€ ì•Šì•„, íŒ€ì›ì´ ë‹¤ë¥¸ ë°©í–¥ìœ¼ë¡œ ìˆ˜ì •í•˜ëŠ” ì¼ì´ ë°œìƒ...')}
                    ${renderTextArea('í˜„ì¬ì˜ ë…¸ë ¥', 'step4_effort', 'ì˜ˆ: ê°œë°œ ê²°ê³¼ë³´ë‹¤ ê³¼ì • ê³µìœ ì˜ í•„ìš”ì„±ì„ ì¸ì‹...')}
                </div>
            `);
        }

        function renderStep5() {
            return renderSection('step5', 'STEP 5. ì•ìœ¼ë¡œì˜ ë°©í–¥', 'ì§€ì›ë™ê¸°Â·ë©´ì ‘ ì—°ê²° ì˜ì—­', `
                <div class="space-y-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <p class="font-semibold text-gray-800 mb-2">âœ ìŠ¤ìŠ¤ë¡œì—ê²Œ ë¬»ëŠ” ì§ˆë¬¸</p>
                        <ul class="space-y-2 text-gray-700">
                            <li>â€¢ ë‚´ê°€ ì§€ì›í•˜ê³  ì‹¶ì€ íšŒì‚¬/ë¶„ì•¼ëŠ” ì–´ë””ì¸ê°€ìš”?</li>
                            <li>â€¢ ê·¸ íšŒì‚¬ì˜ ì½˜í…ì¸  ë˜ëŠ” ì‘ì—… ë°©ì‹ì—ì„œ ì¸ìƒ ê¹Šì—ˆë˜ ì ì€ ë¬´ì—‡ì¸ê°€ìš”?</li>
                            <li>â€¢ ë‚´ ê²½í—˜ ì¤‘, í•´ë‹¹ íšŒì‚¬ì—ì„œ í™œìš©ë  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì€ ë¬´ì—‡ì¸ê°€ìš”?</li>
                        </ul>
                    </div>
                    ${renderTextArea('ê´€ì‹¬ ê¸°ì—…/ë¶„ì•¼', 'step5_company', 'ì˜ˆ: IP ê¸°ë°˜ ê²Œì„ ê°œë°œ ê¸°ì—…, ë¼ì´ë¸Œ ì„œë¹„ìŠ¤ ì¤‘ì‹¬ ê²Œì„ ê¸°ì—…...')}
                    ${renderTextArea('ì¸ìƒ ê¹Šì€ ì´ìœ ', 'step5_impression', 'ì˜ˆ: ìŠ¤í† ë¦¬í…”ë§, ê¸°íš ì˜ë„ê°€ ëŠê»´ì§€ëŠ” ì‹œìŠ¤í…œ ì„¤ê³„, ìœ ì € í”¼ë“œë°±...')}
                    ${renderTextArea('ì—°ê²° ê°€ëŠ¥í•œ ë‚˜ì˜ ê²½í—˜', 'step5_connection', 'ì˜ˆ: íŒ€ í”„ë¡œì íŠ¸ ì¤‘ ìœ ì € í…ŒìŠ¤íŠ¸ í”¼ë“œë°± ë°˜ì˜ ê²½í—˜, ê¸°ëŠ¥ êµ¬í˜„ í›„ í”Œë ˆì´ íë¦„ì„ ì ê²€í•œ ê²½í—˜...')}
                </div>
            `);
        }

        function renderStep6() {
            return renderSection('step6', 'STEP 6. ë©´ì ‘ ëŒ€ë¹„ ì ê²€ ì§ˆë¬¸', 'í•„ìˆ˜ ì²´í¬', `
                <div class="bg-red-50 p-6 rounded-lg border-l-4 border-red-500">
                    <p class="font-semibold text-gray-800 mb-4">ì•„ë˜ ì§ˆë¬¸ì— <strong>ë§ë¡œ ëŒ€ë‹µí•  ìˆ˜ ìˆëŠ”ì§€</strong> ê¼­ í™•ì¸í•˜ì„¸ìš”</p>
                    <div class="space-y-3 text-gray-700">
                        <div class="flex items-start gap-3">
                            <span class="text-red-600">âœ“</span>
                            <p>ì´ ë‚´ìš©, ë©´ì ‘ì—ì„œ ë°”ë¡œ ì„¤ëª…í•  ìˆ˜ ìˆëŠ”ê°€?</p>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="text-red-600">âœ“</span>
                            <p>AIê°€ ì¨ì¤€ ë¬¸ì¥ì„ ë¹¼ë„, ë‚´ ë§ë¡œ ì„¤ëª… ê°€ëŠ¥í•œê°€?</p>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="text-red-600">âœ“</span>
                            <p>"ì™œ?"ë¼ëŠ” ì§ˆë¬¸ì„ 2~3ë²ˆ ë°›ì•„ë„ í”ë“¤ë¦¬ì§€ ì•ŠëŠ”ê°€?</p>
                        </div>
                    </div>
                </div>
            `);
        }

        function attachEventListeners() {
            const textareas = document.querySelectorAll('textarea[data-field]');
            textareas.forEach(textarea => {
                textarea.addEventListener('input', function(e) {
                    const field = this.getAttribute('data-field');
                    handleInputChange(field, this.value);
                });
            });
        }

        async function analyzeWithAI() {
            const filledFields = Object.values(state.responses).filter(v => v && v.trim()).length;
            
            if (filledFields < 5) {
                alert('ìµœì†Œ 5ê°œ ì´ìƒì˜ í•­ëª©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.');
                return;
            }

            state.isAnalyzing = true;
            state.aiAnalysisResult = null;
            render();

            const prompt = `ë‹¤ìŒì€ ì·¨ì—… ì¤€ë¹„ìƒì´ ì‘ì„±í•œ ìê¸°ë¶„ì„ ì›Œí¬ì‹œíŠ¸ ë‚´ìš©ì…ë‹ˆë‹¤. ê° STEPë³„ ì§€ì¹¨ì— ë”°ë¼ ë‚´ìš©ì„ ë¶„ì„í•˜ê³ , ì¼ê´€ëœ ìŠ¤í† ë¦¬ë¼ì¸ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”.

[STEP 1 ë¶„ì„] ë‚˜ëŠ” ì–´ë–»ê²Œ ì‚´ì•„ì™”ëŠ”ê°€
ë‚´ìš©:
- ê´€ì‹¬ì˜ ì‹œì‘ ê³„ê¸°: ${state.responses.step1_interest || '(ì‘ì„± ì•ˆ í•¨)'}
- í˜ë“¤ì—ˆì§€ë§Œ ê³„ì†í–ˆë˜ ì´ìœ : ${state.responses.step1_reason || '(ì‘ì„± ì•ˆ í•¨)'}
- ë‚˜ì˜ ì„±í–¥/íƒœë„ í‚¤ì›Œë“œ: ${state.responses.step1_attitude || '(ì‘ì„± ì•ˆ í•¨)'}

ë¶„ì„ ë°©ë²•: ë‚´ê°€ ì ì€ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ, 1) ê´€ì‹¬ì˜ ì‹œì‘ 2) ì§€ì†í•˜ê²Œ ë§Œë“  ë™ê¸° 3) ë‚˜ì˜ íƒœë„ë¥¼ ì¸ì‚¬ë‹´ë‹¹ìê°€ ì´í•´í•˜ê¸° ì‰½ê²Œ ìš”ì•½í•´ì¤˜. ë¯¸ì‚¬ì—¬êµ¬ëŠ” ë¹¼ê³ , í˜„ì‹¤ì ì¸ í‘œí˜„ìœ¼ë¡œ ì •ë¦¬í•´ì¤˜.

---

[STEP 2 ë¶„ì„] ì–´ë–¤ ì„ íƒì„ í•´ì™”ëŠ”ê°€
ë‚´ìš©:
- ê³ ë¯¼í–ˆë˜ ì„ íƒì§€: ${state.responses.step2_options || '(ì‘ì„± ì•ˆ í•¨)'}
- ì„ íƒ ê¸°ì¤€: ${state.responses.step2_criteria || '(ì‘ì„± ì•ˆ í•¨)'}
- ì§€ê¸ˆ ë°©í–¥ì„ íƒí•œ ì´ìœ : ${state.responses.step2_reason || '(ì‘ì„± ì•ˆ í•¨)'}

ë¶„ì„ ë°©ë²•: ë‚´ê°€ ê³ ë¯¼í–ˆë˜ ì—¬ëŸ¬ ì„ íƒì§€ë¥¼ ë¹„êµí•´ì„œ, ì™œ í˜„ì¬ì˜ ì§ë¬´ ë°©í–¥ì„ ì„ íƒí–ˆëŠ”ì§€ ë…¼ë¦¬ì ìœ¼ë¡œ ì •ë¦¬í•´ì¤˜. ë©´ì ‘ì—ì„œ ì„¤ëª…í•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€ìœ¼ë¡œ ì •ë¦¬í•´ì¤˜.

---

[STEP 3 ë¶„ì„] ë¬´ì—‡ì„ í•´ì™”ëŠ”ê°€
ë‚´ìš©:
- í”„ë¡œì íŠ¸ëª…: ${state.responses.step3_project || '(ì‘ì„± ì•ˆ í•¨)'}
- ë‚˜ì˜ ì—­í• : ${state.responses.step3_role || '(ì‘ì„± ì•ˆ í•¨)'}
- ë¬¸ì œ ìƒí™©: ${state.responses.step3_problem || '(ì‘ì„± ì•ˆ í•¨)'}
- í•´ê²° ê³¼ì •: ${state.responses.step3_solution || '(ì‘ì„± ì•ˆ í•¨)'}
- ê²°ê³¼/ë°°ìš´ ì : ${state.responses.step3_result || '(ì‘ì„± ì•ˆ í•¨)'}

ë¶„ì„ ë°©ë²•: ì•„ë˜ ê²½í—˜ì„ Situation / Task / Action / Result êµ¬ì¡°ë¡œ ì •ë¦¬í•´ì¤˜. ì‹ ì… ì§€ì›ì ê´€ì ì—ì„œ ê°•ì ì´ ì˜ ë“œëŸ¬ë‚˜ê²Œ ì •ë¦¬í•´ì¤˜.

---

[STEP 4 ë¶„ì„] ë¶€ì¡±í•œ ì ê³¼ ì„±ì¥ ë…¸ë ¥
ë‚´ìš©:
- ë¶€ì¡±í•˜ë‹¤ê³  ëŠë‚€ ì : ${state.responses.step4_weakness || '(ì‘ì„± ì•ˆ í•¨)'}
- ê³„ê¸°: ${state.responses.step4_trigger || '(ì‘ì„± ì•ˆ í•¨)'}
- í˜„ì¬ì˜ ë…¸ë ¥: ${state.responses.step4_effort || '(ì‘ì„± ì•ˆ í•¨)'}

ë¶„ì„ ë°©ë²•: ì´ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ì•½ì ì„ ì¸ì‹í•˜ê³  ê°œì„  ì¤‘ì¸ ì‚¬ë¡€ë¡œ ì •ë¦¬í•´ì¤˜. ë³€ëª…ì²˜ëŸ¼ ë³´ì´ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì„œ ì •ë¦¬í•´ì¤˜.

---

[STEP 5 ë¶„ì„] ì•ìœ¼ë¡œì˜ ë°©í–¥
ë‚´ìš©:
- ê´€ì‹¬ ê¸°ì—…/ë¶„ì•¼: ${state.responses.step5_company || '(ì‘ì„± ì•ˆ í•¨)'}
- ì¸ìƒ ê¹Šì€ ì´ìœ : ${state.responses.step5_impression || '(ì‘ì„± ì•ˆ í•¨)'}
- ì—°ê²° ê°€ëŠ¥í•œ ë‚˜ì˜ ê²½í—˜: ${state.responses.step5_connection || '(ì‘ì„± ì•ˆ í•¨)'}

ë¶„ì„ ë°©ë²•: ì´ íšŒì‚¬ì˜ íŠ¹ì§•ê³¼ ë‚´ ê²½í—˜ì„ ì—°ê²°í•´ì„œ ì‹ ì… ì§€ì›ììš© ì§€ì›ë™ê¸° ì´ˆì•ˆì„ ë§Œë“¤ì–´ì¤˜. ê³¼ì¥ëœ í‘œí˜„ì€ í”¼í•˜ê³ , ì‹¤ë¬´ ê´€ì ì—ì„œ ì •ë¦¬í•´ì¤˜.

---

**ìµœì¢… ì¶œë ¥ í˜•ì‹:**

## ğŸ“‹ STEP 1: ë‚˜ëŠ” ì–´ë–»ê²Œ ì‚´ì•„ì™”ëŠ”ê°€
[ë¶„ì„ ë‚´ìš©]

## ğŸ“‹ STEP 2: ì–´ë–¤ ì„ íƒì„ í•´ì™”ëŠ”ê°€
[ë¶„ì„ ë‚´ìš©]

## ğŸ“‹ STEP 3: ë¬´ì—‡ì„ í•´ì™”ëŠ”ê°€
[STAR êµ¬ì¡°ë¡œ ì •ë¦¬ëœ ë‚´ìš©]

## ğŸ“‹ STEP 4: ë¶€ì¡±í•œ ì ê³¼ ì„±ì¥ ë…¸ë ¥
[ë¶„ì„ ë‚´ìš©]

## ğŸ“‹ STEP 5: ì•ìœ¼ë¡œì˜ ë°©í–¥
[ì§€ì›ë™ê¸° ì´ˆì•ˆ]

## ğŸ¯ í†µí•© ìŠ¤í† ë¦¬ë¼ì¸
ìœ„ ë‚´ìš©ë“¤ì„ í•˜ë‚˜ì˜ ì¼ê´€ëœ íë¦„ìœ¼ë¡œ ì—°ê²°í•˜ì—¬, ìê¸°ì†Œê°œì„œì— í™œìš©í•  ìˆ˜ ìˆëŠ” ì™„ì„±ëœ ìŠ¤í† ë¦¬ë¼ì¸ì„ 3-4ë¬¸ë‹¨ìœ¼ë¡œ ì‘ì„±í•´ì¤˜. ê° STEPì´ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°ë˜ë„ë¡ êµ¬ì„±í•´ì¤˜.

## ğŸ’¡ ìŠ¤í† ë¦¬ë¼ì¸ ê°œì„  ì œì•ˆ
- í˜„ì¬ ìŠ¤í† ë¦¬ì˜ ê°•ì  (2-3ê°€ì§€)
- ë³´ì™„ì´ í•„ìš”í•œ ë¶€ë¶„ (2-3ê°€ì§€)
- ë©´ì ‘ì—ì„œ ì˜ˆìƒë˜ëŠ” ì§ˆë¬¸ (3ê°€ì§€)`;

            try {
                const response = await fetch("https://api.anthropic.com/v1/messages", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        model: "claude-sonnet-4-20250514",
                        max_tokens: 4000,
                        messages: [
                            { role: "user", content: prompt }
                        ],
                    })
                });

                const data = await response.json();
                
                if (data.content && data.content[0] && data.content[0].text) {
                    state.aiAnalysisResult = data.content[0].text;
                    saveToStorage();
                } else {
                    state.aiAnalysisResult = "ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
                }
            } catch (error) {
                state.aiAnalysisResult = "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
            }

            state.isAnalyzing = false;
            render();
            
            setTimeout(() => {
                const analysisSection = document.getElementById('ai-analysis-section');
                if (analysisSection) {
                    analysisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }, 100);
        }

        function renderAIAnalysisSection() {
            return `
                <div id="ai-analysis-section" class="bg-white rounded-lg shadow-md overflow-hidden">
                    <div class="p-6 bg-gradient-to-r from-purple-600 to-blue-600">
                        <h2 class="text-2xl font-bold text-white mb-2">ğŸ¤– AI ì¢…í•© ë¶„ì„</h2>
                        <p class="text-purple-100">ì‘ì„±í•œ ë‚´ìš©ì„ AIê°€ ë¶„ì„í•˜ê³  ìê¸°ì†Œê°œì„œÂ·ë©´ì ‘ ì „ëµì„ ì œì•ˆí•©ë‹ˆë‹¤</p>
                    </div>
                    <div class="p-6">
                        ${state.isAnalyzing ? `
                            <div class="flex flex-col items-center justify-center py-12">
                                <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-purple-600 mb-4"></div>
                                <p class="text-gray-600 font-semibold">AIê°€ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</p>
                                <p class="text-gray-500 text-sm mt-2">30ì´ˆ ì •ë„ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                            </div>
                        ` : state.aiAnalysisResult ? `
                            <div class="prose max-w-none">
                                <div class="bg-green-50 border-l-4 border-green-500 p-4 mb-6">
                                    <p class="text-green-800 font-semibold">âœ… ë¶„ì„ ì™„ë£Œ!</p>
                                    <p class="text-green-700 text-sm mt-1">ì•„ë˜ ë‚´ìš©ì„ ì°¸ê³ í•˜ë˜, ë°˜ë“œì‹œ ë³¸ì¸ì˜ ì‹¤ì œ ê²½í—˜ê³¼ ë¹„êµí•˜ë©° ê²€ì¦í•˜ì„¸ìš”.</p>
                                </div>
                                <div class="bg-gray-50 p-6 rounded-lg whitespace-pre-wrap text-gray-800 leading-relaxed">
${state.aiAnalysisResult}
                                </div>
                                <div class="mt-6 flex gap-3">
                                    <button onclick="analyzeWithAI()" class="flex-1 bg-purple-600 hover:bg-purple-700 text-white py-3 px-6 rounded-lg font-semibold transition-colors">
                                        ğŸ”„ ë‹¤ì‹œ ë¶„ì„í•˜ê¸°
                                    </button>
                                    <button onclick="copyAnalysisResult()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-semibold transition-colors">
                                        ğŸ’¾ ë¶„ì„ ê²°ê³¼ ì €ì¥
                                    </button>
                                </div>
                            </div>
                        ` : `
                            <div class="text-center py-8">
                                <div class="mb-6">
                                    <svg class="mx-auto h-24 w-24 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                                    </svg>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800 mb-2">ì‘ì„± ì™„ë£Œ í›„ AI ë¶„ì„ì„ ë°›ì•„ë³´ì„¸ìš”</h3>
                                <p class="text-gray-600 mb-6">ìµœì†Œ 5ê°œ ì´ìƒì˜ í•­ëª©ì„ ì‘ì„±í•˜ë©´ AIê°€ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•´ë“œë¦½ë‹ˆë‹¤</p>
                                <button 
                                    onclick="analyzeWithAI()"
                                    class="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-4 px-8 rounded-lg font-bold text-lg transition-all transform hover:scale-105 shadow-lg"
                                >
                                    âœ¨ AIì—ê²Œ ì¢…í•© ë¶„ì„ ë°›ê¸°
                                </button>
                            </div>
                        `}
                    </div>
                </div>
            `;
        }

        function copyAnalysisResult() {
            if (!state.aiAnalysisResult) return;
            
            const content = '\uFEFF' + `AI ì¢…í•© ë¶„ì„ ê²°ê³¼
==========================================
ì‘ì„±ì¼: ${new Date().toLocaleString('ko-KR')}

${state.aiAnalysisResult}

==========================================
â€» ì´ ë¶„ì„ ê²°ê³¼ëŠ” AIê°€ ìƒì„±í•œ ê²ƒìœ¼ë¡œ, ë°˜ë“œì‹œ ë³¸ì¸ì˜ ì‹¤ì œ ê²½í—˜ê³¼ ë¹„êµí•˜ë©° ê²€ì¦í•˜ì„¸ìš”.
`;

            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const dateStr = new Date().toISOString().split('T')[0];
            a.download = `AIë¶„ì„ê²°ê³¼_${dateStr}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        loadFromStorage();
        render();
    </script>
</body>
</html>